<NODE export_version="0.5" nodetype="restricted_superdoc" title="Gigantic Code Lister">
  <field type="noderef" type_nodetype="user,nodetype" name="author_user">root</field>
  <field type="literal_value" name="authoraccess">iiii</field>
  <field type="literal_value" name="doctext">[{openform}]
List a function (format Everything::MODULE::FUNCTIONNAME): &lt;br>
[% $query->textfield("choicefunc", "", 45) %]
[{closeform}]


[%
  local *getModules = sub{
    my ($this) = @_;
    my @modules = ('Everything');

    my %dontdisplay = ("XMLold" => 1);
    use DirHandle;

    foreach my $lib (@INC) {
        if (-d "$lib/Everything") {
            my $dh = DirHandle->new("$lib/Everything")
                or die "I cannot access $lib/Everything!";

            foreach my $module ($dh->read) {
                next unless -f "$lib/Everything/$module";
                next unless $module =~ s/\.pm$//;
                next if exists $dontdisplay{$module};

                push @modules, "Everything\:\:$module";
            }
        }
    }
    
    @modules;
};



  my $str;
  if (not $query->param('choicefunc')) { 
    $str.="&lt;p>Or choose from the gigantic listing:";
    my @modules = getModules();
    foreach (@modules) { $str.=showModuleFunctions($_); }
  } else {
    $str.=showFunc($query->param('choicefunc'));
  }
  $str;
%]

</field>
  <field type="literal_value" name="dynamicauthor_permission">-1</field>
  <field type="literal_value" name="dynamicgroup_permission">-1</field>
  <field type="literal_value" name="dynamicguest_permission">-1</field>
  <field type="literal_value" name="dynamicother_permission">-1</field>
  <field type="literal_value" name="group_usergroup">-1</field>
  <field type="literal_value" name="groupaccess">iiii-</field>
  <field type="literal_value" name="guestaccess">iiii-</field>
  <field type="noderef" type_nodetype="location,nodetype" name="loc_location">restricted_superdoc</field>
  <field type="literal_value" name="otheraccess">iiii-</field>
  <field type="literal_value" name="title">Gigantic Code Lister</field>
  <field type="noderef" type_nodetype="nodetype,nodetype" name="type_nodetype">restricted_superdoc</field>
</NODE>
