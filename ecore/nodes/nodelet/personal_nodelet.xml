<NODE export_version="0.5" nodetype="nodelet" title="personal nodelet">
  <field type="noderef" type_nodetype="user,nodetype" name="author_user">root</field>
  <field type="literal_value" name="authoraccess">iiii</field>
  <field type="literal_value" name="dynamicauthor_permission">-1</field>
  <field type="literal_value" name="dynamicgroup_permission">-1</field>
  <field type="literal_value" name="dynamicguest_permission">-1</field>
  <field type="literal_value" name="dynamicother_permission">-1</field>
  <field type="literal_value" name="group_usergroup">-1</field>
  <field type="literal_value" name="groupaccess">iiii-</field>
  <field type="literal_value" name="guestaccess">iiii-</field>
  <field type="noderef" type_nodetype="location,nodetype" name="loc_location">nodelet</field>
  <field type="literal_value" name="mini_nodelet">0</field>
  <field type="literal_value" name="nlcode">[%
  my $limit = $HTMLVARS{personalNodeletLimit} || 10;

  my @nodes;
  @nodes = split("&lt;br>",$$VARS{personal_nodelet}) if ($$VARS{personal_nodelet});
  if (my $n = $query->param("addpersonalnodelet")) {
    $n = getNodeById $n;
    $$VARS{personal_nodelet} .= '&lt;br>'.$$n{title}
      if @nodes &lt; $limit;
    push @nodes, $$n{title};
  }


  my $str;
  my $i=0;
  foreach (@nodes) {
    $str.=linkNodeTitle($_)."&lt;br>\n";
    last if $i++ >= 10;
  }

  $str.="\n&lt;p align=right>"
    .linkNode($NODE, "add \"$$NODE{title}\"", {addpersonalnodelet => getId($NODE)})
    if @nodes &lt; $limit;
  $str;

%]</field>
  <field type="literal_value" name="nlgoto">0</field>
  <field type="literal_value" name="nltext"></field>
  <field type="literal_value" name="otheraccess">iiii-</field>
  <field type="noderef" type_nodetype="container,nodetype" name="parent_container">general nodelet container</field>
  <field type="literal_value" name="title">personal nodelet</field>
  <field type="noderef" type_nodetype="nodetype,nodetype" name="type_nodetype">nodelet</field>
  <field type="literal_value" name="updateinterval">0</field>
</NODE>
