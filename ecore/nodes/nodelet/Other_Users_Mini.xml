<NODE export_version="0.5" nodetype="nodelet" title="Other Users Mini">
  <field type="noderef" type_nodetype="user,nodetype" name="author_user">root</field>
  <field type="literal_value" name="authoraccess">iiii</field>
  <field type="literal_value" name="dynamicauthor_permission">-1</field>
  <field type="literal_value" name="dynamicgroup_permission">-1</field>
  <field type="literal_value" name="dynamicguest_permission">-1</field>
  <field type="literal_value" name="dynamicother_permission">-1</field>
  <field type="literal_value" name="group_usergroup">-1</field>
  <field type="literal_value" name="groupaccess">iiii-</field>
  <field type="literal_value" name="guestaccess">iiii-</field>
  <field type="noderef" type_nodetype="location,nodetype" name="loc_location">nodelet</field>
  <field type="noderef" type_nodetype="nodelet,nodetype" name="mini_nodelet">Other Users</field>
  <field type="literal_value" name="nlcode">[%

my $time = 3 * 60;
my $limit = 30;

my $csr=$DB->getDatabaseHandle()->prepare("	
	SELECT node_id, title FROM node, user
	WHERE node_id=user_id and
	type_nodetype=". getId ($DB->getType('user')) ." and
	(UNIX_TIMESTAMP(now())-UNIX_TIMESTAMP(lasttime) &lt; $time)
	LIMIT $limit");

$csr->execute or return "SHIT";
my $str;
while(my $U = $csr->fetchrow_hashref) {
	$str .= linkNode($U, "&lt;font size=1 color=#FFFFFF> $$U{title} \;&lt;/font>");
}
$csr->finish;
return $str if $str;
"&lt;i>no users logged in&lt;/i>";
%] </field>
  <field type="literal_value" name="nlgoto">0</field>
  <field type="literal_value" name="nltext"></field>
  <field type="literal_value" name="otheraccess">iiii-</field>
  <field type="noderef" type_nodetype="container,nodetype" name="parent_container">general nodelet container</field>
  <field type="literal_value" name="title">Other Users Mini</field>
  <field type="noderef" type_nodetype="nodetype,nodetype" name="type_nodetype">nodelet</field>
  <field type="literal_value" name="updateinterval">0</field>
</NODE>
