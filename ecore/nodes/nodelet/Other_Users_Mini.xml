<NODE export_version="0.5" nodetype="nodelet" title="Other Users Mini">
  <field name="author_user" type="noderef" type_nodetype="user,nodetype">root</field>
  <field name="authoraccess" type="literal_value">iiii</field>
  <field name="dynamicauthor_permission" type="literal_value">-1</field>
  <field name="dynamicgroup_permission" type="literal_value">-1</field>
  <field name="dynamicguest_permission" type="literal_value">-1</field>
  <field name="dynamicother_permission" type="literal_value">-1</field>
  <field name="group_usergroup" type="literal_value">-1</field>
  <field name="groupaccess" type="literal_value">iiii-</field>
  <field name="guestaccess" type="literal_value">iiii-</field>
  <field name="loc_location" type="noderef" type_nodetype="location,nodetype">nodelet</field>
  <field name="mini_nodelet" type="noderef" type_nodetype="nodelet,nodetype">Other Users</field>
  <field name="nlcode" type="literal_value">[%

my $time = 3 * 60;
my $limit = 30;

my $csr=$DB-&gt;getDatabaseHandle()-&gt;prepare(&quot;	
	SELECT node_id, title FROM node, user
	WHERE node_id=user_id and
	type_nodetype=&quot;. getId ($DB-&gt;getType('user')) .&quot; and
	(UNIX_TIMESTAMP(now())-UNIX_TIMESTAMP(lasttime) &lt; $time)
	LIMIT $limit&quot;);

$csr-&gt;execute or return &quot;SHIT&quot;;
my $str;
while(my $U = $csr-&gt;fetchrow_hashref) {
	$str .= linkNode($U, &quot;&lt;font size=1 color=#FFFFFF&gt; $$U{title} \;&lt;/font&gt;&quot;);
}
$csr-&gt;finish;
return $str if $str;
&quot;&lt;i&gt;no users logged in&lt;/i&gt;&quot;;
%] </field>
  <field name="otheraccess" type="literal_value">iiii-</field>
  <field name="parent_container" type="noderef" type_nodetype="container,nodetype">general nodelet container</field>
  <field name="title" type="literal_value">Other Users Mini</field>
  <field name="type_nodetype" type="noderef" type_nodetype="nodetype,nodetype">nodelet</field>
  <field name="updateinterval" type="literal_value">0</field>
</NODE>
