<NODE export_version="0.5" nodetype="htmlsnippet" title="editNodePermissions">
  <field name="author_user" type="noderef" type_nodetype="user,nodetype">root</field>
  <field name="authoraccess" type="literal_value">iiii</field>
  <field name="code" type="literal_value">[%
# Set up color stuff for this page
$GLOBAL{permColorLite} = "#cccccc";
$GLOBAL{permColorLite} = $$THEME{permColorLite}
    if(exists $$THEME{permColorLite});
$GLOBAL{permColorDark} = "#999999";
$GLOBAL{permColorDark} = $$THEME{permColorDark}
    if(exists $$THEME{permColorDark});
%]
&lt;table cellspacing=1 border=0>
 &lt;tr>
  &lt;td>&amp;nbsp;&lt;/td>
  &lt;td bgcolor='["$GLOBAL{permColorLite}"]'>Read&lt;/td>
  &lt;td bgcolor='["$GLOBAL{permColorLite}"]'>Write&lt;/td>
  &lt;td bgcolor='["$GLOBAL{permColorLite}"]'>Execute&lt;/td>
  &lt;td bgcolor='["$GLOBAL{permColorLite}"]'>Delete&lt;/td>
  &lt;td bgcolor='["$GLOBAL{permColorLite}"]'>Parent Settings&lt;/td>
  &lt;td bgcolor='["$GLOBAL{permColorLite}"]'>Dynamic&lt;td>
 &lt;/tr>
 &lt;tr>
  &lt;td bgcolor='["$GLOBAL{permColorLite}"]'>author&lt;/td>
  &lt;td bgcolor='["$GLOBAL{permColorDark}"]'>
    [{nodeFormObject: PermissionMenu, authoraccess, authorr, r}]&lt;/td>
  &lt;td bgcolor='["$GLOBAL{permColorDark}"]'>
    [{nodeFormObject: PermissionMenu, authoraccess, authorw, w}]&lt;/td>
  &lt;td bgcolor='["$GLOBAL{permColorDark}"]'>
    [{nodeFormObject: PermissionMenu, authoraccess, authorx, x}]&lt;/td>
  &lt;td bgcolor='["$GLOBAL{permColorDark}"]'>
    [{nodeFormObject: PermissionMenu, authoraccess, authord, d}]&lt;/td>
  &lt;td bgcolor='["$GLOBAL{permColorDark}"]'>[{displayInheritedPermissions:author}]&lt;/td>
  &lt;td bgcolor='["$GLOBAL{permColorDark}"]'>
[%
my $inherit = $$NODE{type}{derived_defaultauthor_permission};
my $inherittxt = "None";
if($inherit &amp;&amp; $inherit > 0)
{
   my $N = $DB->getNode($inherit);
   $inherittxt = $$N{title};
}
nodeFormObject('TypeMenu', 'dynamicauthor_permission', 'authorperm',
  'permission', 'AUTO', $USER, 'r', 0, -1, $inherittxt);
%]
  &lt;/td>
 &lt;/tr>
 &lt;tr>
  &lt;td nowrap bgcolor='["$GLOBAL{permColorLite}"]'>group
[%
my $defgroup = getNode($$NODE{type}{derived_defaultgroup_usergroup});
my $menu = newFormObject("PopupMenu");

$menu->addHash({ "inherit ($$defgroup{title})" => -1 }, 1);
$menu->addHash({ "None" => 0 }, 1);
$menu->addType("usergroup", $USER, 'w', 'labels');
$menu->genObject($query, $NODE, "group_usergroup", "usergroup");
%]&lt;/td>
  &lt;td bgcolor='["$GLOBAL{permColorDark}"]'>
    [{nodeFormObject: PermissionMenu, groupaccess, groupr, r}]&lt;/td>
  &lt;td bgcolor='["$GLOBAL{permColorDark}"]'>
    [{nodeFormObject: PermissionMenu, groupaccess, groupw, w}]&lt;/td>
  &lt;td bgcolor='["$GLOBAL{permColorDark}"]'>
    [{nodeFormObject: PermissionMenu, groupaccess, groupx, x}]&lt;/td>
  &lt;td bgcolor='["$GLOBAL{permColorDark}"]'>
    [{nodeFormObject: PermissionMenu, groupaccess, groupd, d}]&lt;/td>
  &lt;td bgcolor='["$GLOBAL{permColorDark}"]'>[{displayInheritedPermissions:group,}]&lt;/td>
  &lt;td bgcolor='["$GLOBAL{permColorDark}"]'>
[%
my $inherit = $$NODE{type}{derived_defaultgroup_permission};
my $inherittxt = "None";
if($inherit &amp;&amp; $inherit > 0)
{
   my $N = $DB->getNode($inherit);
   $inherittxt = $$N{title};
}
nodeFormObject('TypeMenu', 'dynamicgroup_permission', 'groupperm',
  'permission', 'AUTO', $USER, 'r', 0, -1, $inherittxt);
%]
 &lt;/td>
 &lt;/tr>

 &lt;tr>
  &lt;td bgcolor='["$GLOBAL{permColorLite}"]'>other&lt;/td>
  &lt;td bgcolor='["$GLOBAL{permColorDark}"]'>
    [{nodeFormObject: PermissionMenu, otheraccess, otherr, r}]&lt;/td>
  &lt;td bgcolor='["$GLOBAL{permColorDark}"]'>
    [{nodeFormObject: PermissionMenu, otheraccess, otherw, w}]&lt;/td>
  &lt;td bgcolor='["$GLOBAL{permColorDark}"]'>
    [{nodeFormObject: PermissionMenu, otheraccess, otherx, x}]&lt;/td>
  &lt;td bgcolor='["$GLOBAL{permColorDark}"]'>
    [{nodeFormObject: PermissionMenu, otheraccess, otherd, d}]&lt;/td>
  &lt;td bgcolor='["$GLOBAL{permColorDark}"]'>[{displayInheritedPermissions:other}]&lt;/td>
  &lt;td bgcolor='["$GLOBAL{permColorDark}"]'>
[%
my $inherit = $$NODE{type}{derived_defaultother_permission};
my $inherittxt = "None";
if($inherit &amp;&amp; $inherit > 0)
{
   my $N = $DB->getNode($inherit);
   $inherittxt = $$N{title};
}
nodeFormObject('TypeMenu', 'dynamicother_permission', 'otherperm',
  'permission', 'AUTO', $USER, 'r', 0, -1, $inherittxt);
%]
  &lt;/td>
 &lt;/tr>
 &lt;tr>
  &lt;td bgcolor='["$GLOBAL{permColorLite}"]'>guest&lt;/td>
  &lt;td bgcolor='["$GLOBAL{permColorDark}"]'>
    [{nodeFormObject: PermissionMenu, guestaccess, guestr, r}]&lt;/td>
  &lt;td bgcolor='["$GLOBAL{permColorDark}"]'>
    [{nodeFormObject: PermissionMenu, guestaccess, guestw, w}]&lt;/td>
  &lt;td bgcolor='["$GLOBAL{permColorDark}"]'>
    [{nodeFormObject: PermissionMenu, guestaccess, guestx, x}]&lt;/td>
  &lt;td bgcolor='["$GLOBAL{permColorDark}"]'>
    [{nodeFormObject: PermissionMenu, guestaccess, guestd, d}]&lt;/td>
  &lt;td bgcolor='["$GLOBAL{permColorDark}"]'>[{displayInheritedPermissions:guest}]&lt;/td>
  &lt;td bgcolor='["$GLOBAL{permColorDark}"]'>
[%
my $inherit = $$NODE{type}{derived_defaultguest_permission};
my $inherittxt = "None";
if($inherit &amp;&amp; $inherit > 0)
{
   my $N = $DB->getNode($inherit);
   $inherittxt = $$N{title};
}
nodeFormObject('TypeMenu', 'dynamicguest_permission', 'guestperm',
  'permission', 'AUTO', $USER, 'r', 0, -1, $inherittxt);
%]
  &lt;/td>
 &lt;/tr>
&lt;/table>
</field>
  <field name="dynamicauthor_permission" type="literal_value">-1</field>
  <field name="dynamicgroup_permission" type="literal_value">-1</field>
  <field name="dynamicguest_permission" type="literal_value">-1</field>
  <field name="dynamicother_permission" type="literal_value">-1</field>
  <field name="group_usergroup" type="literal_value">-1</field>
  <field name="groupaccess" type="literal_value">iiii-</field>
  <field name="guestaccess" type="literal_value">iiii-</field>
  <field name="loc_location" type="noderef" type_nodetype="location,nodetype">htmlsnippet</field>
  <field name="otheraccess" type="literal_value">iiii-</field>
  <field name="title" type="literal_value">editNodePermissions</field>
  <field name="type_nodetype" type="noderef" type_nodetype="nodetype,nodetype">htmlsnippet</field>
</NODE>
