<NODE><INFO>rendered by Everything::XML.pm</INFO>
	<author_user table="node" type="user">root</author_user>
	<authoraccess table="node">iiii</authoraccess>
	<code table="htmlcode">my $disp = $query-&gt;param("displaytype");
my $str;
my @links;

my $CLONER = getNode("node cloner", "restricted_superdoc");
my $PARAMS = { "srcnode_id" =&gt; $$NODE{node_id}, 
  "node_id" =&gt; $$CLONER{node_id},
  "newname" =&gt; "NEWNAME" };

my $url = urlGen($PARAMS);
my $script = "
&lt;script language=\"javascript\"&gt;

function cloneNode()
{
  var newname = prompt(\"Cloning node \\\"$$NODE{title}\\\"\\nEnter a new name:\", \"\");

  if(newname)
  {
    var url = $url;
    
    url = url.replace(/NEWNAME/, newname);
    url = url.replace(/ /g, \"%20\");
    parent.location = url;
  }
}

&lt;/script&gt;";


$disp ||= "display";

# If you want to have other default display links in the
# adminbar, add them to this array.
my @displaytypes = ("display");

push @displaytypes, ("edit",'permissions') if $NODE-&gt;hasAccess($USER,'w');



foreach my $type (@displaytypes)
{
  if ($disp eq $type)
  {
    push @links, $type;
  } 
  else
  {
    push @links, linkNode ($NODE, $type, 
      {displaytype =&gt; $type}) . " ";
  }
}

$str .= join " |\n", @links;
$str = "" if $str eq 'display';

$str .= "&lt;br&gt;".$script."&lt;a href='javascript: cloneNode();'&gt;clone&lt;/a&gt;" if $NODE-&gt;{type}-&gt;hasTypeAccess($USER, 'c');

$str.="
&lt;SCRIPT language=\"javascript\"&gt;
  function confirmDelete(){
    if(confirm(\"Delete '$$NODE{title}'?\")){
      parent.location=" .
        urlGen({node_id=&gt;getId($NODE),op=&gt;"nuke"}) .
		"; }
        }
&lt;/SCRIPT&gt;
&lt;br&gt;&lt;font size=1&gt;
&lt;a href='javascript: confirmDelete();'&gt;delete&lt;/a&gt;
&lt;/font&gt;" if($NODE-&gt;hasAccess($USER, "d"));

$str;</code>
	<dynamicauthor_permission table="node">-1</dynamicauthor_permission>
	<dynamicgroup_permission table="node">-1</dynamicgroup_permission>
	<dynamicguest_permission table="node">-1</dynamicguest_permission>
	<dynamicother_permission table="node">-1</dynamicother_permission>
	<group_usergroup table="node">-1</group_usergroup>
	<groupaccess table="node">iiii-</groupaccess>
	<guestaccess table="node">iiii-</guestaccess>
	<loc_location table="node" type="location">htmlcode</loc_location>
	<otheraccess table="node">iiii-</otheraccess>
	<title table="node">adminbar</title>
	<type_nodetype table="node" type="nodetype">htmlcode</type_nodetype>
</NODE>