<NODE><INFO>rendered by Everything::XML.pm</INFO>
	<author_user table="node" type="user">root</author_user>
	<authoraccess table="node">iiii</authoraccess>
	<code table="htmlcode">my $id = getId $NODE;

my $str = "

&lt;SCRIPT LANGUAGE=\"JavaScript1.1\"&gt;

function saveForm()
{
    with (document.forms[$id].elements[0]) {
        for(i=0;i&lt;length;i++) {
            document.forms[$id].elements[1+i].value=options[i].value;
        }
    }
    return true;
}

function swapUp()
{
    with (document.forms[$id].elements[0]) {
        x=selectedIndex;
        if(x == -1 || x == 0) { return; }
        if(options.length &gt; 1) {  // We need at least 2 to do a swap
                tmp = new Option(options[x].text, options[x].value);
                options[x] = options[x-1];
                options[x-1] = tmp;
                options[x-1].selected = true;
        }
    }
}

function swapDn()
{
    with (document.forms[$id].elements[0]) {
        x=selectedIndex;
        if(x == -1) { return; }
        if(x+1 &lt; options.length) {
                tmp = new Option(options[x].text, options[x].value);
                options[x] = options[x+1];
                options[x+1] = tmp;
                options[x+1].selected = true;
        }
    }
}

function deleteOp()
{
    with (document.forms[$id].elements[0]) {
        x=selectedIndex;
        if(x == -1) { return; }
        for(i=x;i&lt;options.length;i++) {
            options[i]=options[i+1];
        }
        options[options.length] = null;
        if(x==0) { x=1; }
        options[x-1].selected = true;
    }
}

&lt;/SCRIPT&gt;";

$str .= "&lt;FORM METHOD=\"GET\" NAME=\"$id\" onSubmit=\"saveForm()\"&gt;";

my $GROUP = $$NODE{group};

$GROUP ||= [];

my $size = (@$GROUP)/10;

$size = 10 if($size &lt; 10);

#generate the select box
$str .= " &lt;SELECT NAME=\"group\" size=$size&gt;\n";
foreach my $item (@$GROUP) {
  my $ITEM = getNode($item, 'light');
  $str .= " &lt;OPTION VALUE=\"" . getId ($ITEM) . "\"&gt;$$ITEM{title}\n";
}
$str .= "&lt;/SELECT&gt;&lt;BR&gt;";

#generate the hidden elements
for (my $i = 0; $i &lt; (5 + @$GROUP); $i++) {
  $str .= "&lt;INPUT type=hidden name=$i value=\"\"&gt;\n";
}

$str .= $query-&gt;hidden('node_id', getId $NODE) .
  $query-&gt;hidden('displaytype');

$str .= $query-&gt;button(-name =&gt; "Delete", -onClick =&gt; "deleteOp();") . "\n";
$str .= $query-&gt;button(-name =&gt; "Up", -onClick =&gt; "swapUp();") . "\n";
$str .= $query-&gt;button(-name =&gt; "Down", -onClick =&gt; "swapDn();") . "\n";
$str .= '
&lt;INPUT TYPE=submit BORDER=0 
        VALUE="Save" onClick="javascript:saveForm()"&gt;';

$str .= "&lt;/FORM&gt;";

$str;</code>
	<dynamicauthor_permission table="node">-1</dynamicauthor_permission>
	<dynamicgroup_permission table="node">-1</dynamicgroup_permission>
	<dynamicguest_permission table="node">-1</dynamicguest_permission>
	<dynamicother_permssion table="node">-1</dynamicother_permssion>
	<group_usergroup table="node">-1</group_usergroup>
	<groupaccess table="node">iiii-</groupaccess>
	<guestaccess table="node">iiii-</guestaccess>
	<loc_location table="node" type="location">htmlcode</loc_location>
	<otheraccess table="node">iiii-</otheraccess>
	<title table="node">groupeditor</title>
	<type_nodetype table="node" type="nodetype">htmlcode</type_nodetype>
</NODE>