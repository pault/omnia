<NODE export_version="0.5" nodetype="htmlcode" title="editDynamicPermissions">
  <field type="noderef" type_nodetype="user,nodetype" name="author_user">root</field>
  <field type="literal_value" name="authoraccess">iiii</field>
  <field type="literal_value" name="code">use Everything::FormMenu;

# class - the class of user (author, group, other, guest)
# forType - 1, if the dynamic permissions to edit are the
#  default permissions on the nodetype.  nothing if this
#  is to edit the permissions on the node itself.  This
#  just determines what fields we need to access.

my ($class, $forType) = @_;
my $str;
my $name;
my $menu = new Everything::FormMenu();

$menu->addHash({"-1" => "inherit", "0" => "none"});
$menu->addType("permission", 1);

$name = ($forType ? "default" : "dynamic");
$name .= $class . "_permission";

$str = $menu->writePopupHTML($query,
  $$NODE{type}{title} . "_" . $name, $$NODE{$name});

return $str;
</field>
  <field type="literal_value" name="dynamicauthor_permission">-1</field>
  <field type="literal_value" name="dynamicgroup_permission">-1</field>
  <field type="literal_value" name="dynamicguest_permission">-1</field>
  <field type="literal_value" name="dynamicother_permission">-1</field>
  <field type="literal_value" name="group_usergroup">-1</field>
  <field type="literal_value" name="groupaccess">iiii-</field>
  <field type="literal_value" name="guestaccess">iiii-</field>
  <field type="noderef" type_nodetype="location,nodetype" name="loc_location">htmlcode</field>
  <field type="literal_value" name="otheraccess">iiii-</field>
  <field type="literal_value" name="title">editDynamicPermissions</field>
  <field type="noderef" type_nodetype="nodetype,nodetype" name="type_nodetype">htmlcode</field>
</NODE>
