<NODE export_version="0.5" nodetype="htmlcode" title="displaytable">
  <field name="author_user" type="noderef" type_nodetype="user,nodetype">root</field>
  <field name="authoraccess" type="literal_value">iiii</field>
  <field name="code" type="literal_value"># This generates an HTML table that contains the fields
# of a database table.  The output is similar to what
# you get when 'show columns from $table' is executed.
my ($table, $edit) = @_;
my @fields = $DB->getFieldsHash($table);
my $field;
my $fieldname;
my $value;
my $str = "";

$edit = 0 if(not defined $edit);

$str .= "&lt;table border=1 width=400>\n";

$field = $fields[0];

  $str .= " &lt;tr>\n";
foreach $fieldname (keys %$field)
{
  $str .= "  &lt;td bgcolor=\"#cccccc\">$fieldname&lt;/td>\n";
}

$str .= "  &lt;td bgcolor=\"#cccccc\">Remove Field?&lt;/td>\n" if($edit);
$str .= " &lt;/tr>\n";

foreach $field (@fields)
{
  $str .= " &lt;tr>\n";
  foreach $value (values %$field)
  {
    $value = "&amp;nbsp;" if (!(defined $value) or ($value eq "")); # fill in the blanks
    $str .= "  &lt;td>$value&lt;/td>\n";
  }
  $str .= "  &lt;td>" .
    $query->checkbox(-name => $$field{Field} . "REMOVE",
        -value => 'REMOVE',
        -label => 'Remove?') .
    "  &lt;/td>\n" if($edit);
  $str .= " &lt;/tr>\n";
}

$str .= "&lt;/table>\n";

if($edit)
{
  $str .= "&lt;br>\n";
  $str .= "Add new field:&lt;br>";
  $str .= "Field Name: ";
  $str .= $query->textfield( -name => "fieldname_new",
      -default => "",
      -size => 30,
      -maxlength => 50);
  $str .= "&lt;br>Field type: ";
  $str .= $query->textfield( -name => "fieldtype_new",
      -default => "",
      -size => 10,
      -maxlength => 10);
  $str .= " (i.e. int(11), char(32), text, etc.)";
  $str .= "&lt;br>Default value: ";
  $str .= $query->textfield( -name => "fielddefault_new",
      -default => "",
      -size => 50,
      -maxlength => 50);
  $str .= "&lt;br>\n";
  $str .= $query->checkbox(-name => "fieldprimary_new",
      -value => "primary",
      -label => "Primary Key?");
  $str .= "&lt;br>\n";
}

$str;
</field>
  <field name="dynamicauthor_permission" type="literal_value">-1</field>
  <field name="dynamicgroup_permission" type="literal_value">-1</field>
  <field name="dynamicguest_permission" type="literal_value">-1</field>
  <field name="dynamicother_permission" type="literal_value">-1</field>
  <field name="group_usergroup" type="literal_value">-1</field>
  <field name="groupaccess" type="literal_value">iiii-</field>
  <field name="guestaccess" type="literal_value">iiii-</field>
  <field name="loc_location" type="noderef" type_nodetype="location,nodetype">htmlcode</field>
  <field name="otheraccess" type="literal_value">iiii-</field>
  <field name="title" type="literal_value">displaytable</field>
  <field name="type_nodetype" type="noderef" type_nodetype="nodetype,nodetype">htmlcode</field>
</NODE>
