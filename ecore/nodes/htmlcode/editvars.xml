<NODE export_version="0.5" nodetype="htmlcode" title="editvars">
  <field name="author_user" type="noderef" type_nodetype="user,nodetype">root</field>
  <field name="authoraccess" type="literal_value">iiii</field>
  <field name="code" type="literal_value"># This generates the html to edit the vars hash of a node.
#
# Parameters
#   $varfield - (optional) The field of the node that contains the vars
#       hash this is to edit.  Defaults to 'vars'.
#   $N - (optional) the node object that we are editing.  Defaults to $NODE
#

my ($varsfield, $N) = @_;
$varsfield ||= 'vars';
$N ||= $NODE;
my $html = "&lt;table border=0>\n";
my $vars = $N->getHash($varsfield);
my @keys;

@keys = sort keys %$vars if($vars);

my $keyColor = $$THEME{keyColor};
my $valueColor = $$THEME{valueColor};
my $removeColor = $$THEME{removeColor};

$keyColor ||= "#cc99cc";
$valueColor ||= "#cc99ff";
$removeColor ||= "#999999";

$html .= "&lt;tr>&lt;td bgcolor='$removeColor'>Remove&lt;/td>\n";
$html .= "&lt;td bgcolor='$keyColor'>&lt;b>Keys&lt;/b>&lt;/td>\n";
$html .= "&lt;td bgcolor='$valueColor'>&lt;b>Values&lt;/b>&lt;/td>&lt;/tr>\n";

push @keys, "NEWFIELD";

foreach my $key (@keys)
{
  $html .= "&lt;tr>&lt;td colspan=3>New Key/Value:&lt;/td>&lt;/tr>\n" if($key eq "NEWFIELD");
  $html .= "&lt;tr>&lt;td bgcolor='$removeColor'>";
  $html .= bindFormObject('removeVarCheckbox', $N, $varsfield, $key)
    if($key ne "NEWFIELD");
  $html .= "&lt;/td>&lt;td bgcolor='$keyColor' nowrap>";
  $html .= bindFormObject('varstextfield', $N, $varsfield, $key, 1);
  $html .= "&lt;/td>&lt;td bgcolor='$valueColor' nowrap>\n";
  $html .= bindFormObject('varstextfield', $N, $varsfield, $key, 0);
  $html .= " " . linkVar($key, $$vars{$key});
  $html .= " &lt;/td>&lt;/tr>\n";
}

$html .= "&lt;/table>";
$html;</field>
  <field name="dynamicauthor_permission" type="literal_value">-1</field>
  <field name="dynamicgroup_permission" type="literal_value">-1</field>
  <field name="dynamicguest_permission" type="literal_value">-1</field>
  <field name="dynamicother_permission" type="literal_value">-1</field>
  <field name="group_usergroup" type="literal_value">-1</field>
  <field name="groupaccess" type="literal_value">iiii-</field>
  <field name="guestaccess" type="literal_value">iiii-</field>
  <field name="loc_location" type="noderef" type_nodetype="location,nodetype">htmlcode</field>
  <field name="otheraccess" type="literal_value">iiii-</field>
  <field name="title" type="literal_value">editvars</field>
  <field name="type_nodetype" type="noderef" type_nodetype="nodetype,nodetype">htmlcode</field>
</NODE>
