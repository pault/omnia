<NODE export_version="0.5" nodetype="htmlcode" title="displayvars">
  <field type="noderef" type_nodetype="user,nodetype" name="author_user">root</field>
  <field type="literal_value" name="authoraccess">iiii</field>
  <field type="literal_value" name="code"># This displays the variables contained in a setting, and
# the values assigned to each one.  The values are displayed
# as links to nodes if the node is present (with the node_Id
# in parentheses) otherwise it is simply listed as text.


my $SETTINGS = getVars $NODE;
my $str;
my ($keyclr, $valclr) = ("#CCCCFF", "#DEDEFF");


my @skeys = keys %$SETTINGS;
if (not @skeys) { 
  return "&lt;i>the node's settings are empty&lt;/i>&lt;br>\n";
}

@skeys = sort {$a cmp $b} @skeys;
my $zulu;
$str.="&lt;TABLE width=100% cellpadding=1 cellspacing=0>\n";
$str.="&lt;TR>&lt;TH>Setting&lt;/TH>&lt;TH>Value&lt;/TH>&lt;/TR>\n";
foreach (@skeys) 
 {    
      $str.= "&lt;TR>&lt;TD bgcolor=$keyclr>$_&lt;/TD>";
      $zulu=$_;
      #checks if the value is a node id (a number that exists as a nodeId)
      if (($_=~/(.+?)\_(.+?)/)and ($$SETTINGS{$_}!~/\D/ ) and (getNodeById($$SETTINGS{$_}) ))
         { $str.="&lt;TD bgcolor=$valclr>" . linkNode($$SETTINGS{$_}) . " ($$SETTINGS{$_})&lt;/TD>&lt;/TR>\n";  }
      else
       {   $str.="&lt;TD bgcolor=$valclr>$$SETTINGS{$_}&lt;/TR>\n";}
 }
$str .="&lt;/TABLE>\n";
</field>
  <field type="literal_value" name="dynamicauthor_permission">-1</field>
  <field type="literal_value" name="dynamicgroup_permission">-1</field>
  <field type="literal_value" name="dynamicguest_permission">-1</field>
  <field type="literal_value" name="dynamicother_permission">-1</field>
  <field type="literal_value" name="group_usergroup">-1</field>
  <field type="literal_value" name="groupaccess">iiii-</field>
  <field type="literal_value" name="guestaccess">iiii-</field>
  <field type="noderef" type_nodetype="location,nodetype" name="loc_location">htmlcode</field>
  <field type="literal_value" name="otheraccess">iiii-</field>
  <field type="literal_value" name="title">displayvars</field>
  <field type="noderef" type_nodetype="nodetype,nodetype" name="type_nodetype">htmlcode</field>
</NODE>
