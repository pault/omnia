<NODE export_version="0.5" nodetype="superdoc" title="What is my password">
  <field name="author_user" type="noderef" type_nodetype="user,nodetype">root</field>
  <field name="authoraccess" type="literal_value">iiii</field>
  <field name="doctext" type="literal_value">[%
  my $str;
  $str.=&quot;Forgot your username or password? All we need is one of the following blanks filled in correctly and you should be able to find the answers to your most perplexing question&quot;;
  $str.=$query-&gt;start_form(&quot;POST&quot;, $ENV{SCRIPT_NAME});
  $str.='&lt;INPUT TYPE=&quot;hidden&quot; NAME=&quot;op&quot; VALUE=&quot;lostpasswd&quot;&gt;';
  $str.=$query-&gt;hidden('node_id',getId($NODE));
  $str.=&quot;Your username:&quot;;
  $str.='&lt;INPUT TYPE=&quot;text&quot; NAME=&quot;username&quot; VALUE=&quot;&quot;&gt;&lt;br&gt;';
  $str.=&quot;Your e-mail address:&quot;;
  $str.='&lt;INPUT TYPE=&quot;text&quot; NAME=&quot;email&quot; VALUE=&quot;&quot;&gt;&lt;br&gt;';
  $str.=$query-&gt;submit(&quot;formsubmit&quot;, &quot;Mail me my password, Cowboy!&quot;);
  $str.=$query-&gt;end_form;


  if($query-&gt;param('op') eq 'lostpasswd' and ($query-&gt;param('username') || $query-&gt;param('email'))){
      my $haverow=0;
      my $username=$query-&gt;param('username');
      my $email=$query-&gt;param('email');
      my @N;
      if($username){
          @N = getNode($username, getType('user'));
          $haverow=$N[0];
      }
      if(!$haverow and $email){
          @N=$DB-&gt;getNodeWhere ({email =&gt; $email}, $DB-&gt;getType('user'
));    
          $haverow=$N[0];
      }
      if($haverow){
         my ($n) = getNode('Password Mail', getType('mail'));
         $$n{doctext} =~ s/\&lt;name\&gt;/$$haverow{realname}/;
         $$n{doctext} =~ s/\&lt;user\&gt;/$$haverow{title}/;
         $$n{doctext} =~ s/\&lt;passwd\&gt;/$$haverow{passwd}/;
         $$n{doctext} =~ s/\&lt;site_name\&gt;/$HTMLVARS{site_name}/;
         $$n{doctext} =~ s/\&lt;site_url\&gt;/$HTMLVARS{site_url}/;
         use Everything::Mail;
         node2mail($$haverow{email},$n);
         $n = getNodeById(getId($n), 'force');
         $str.=&quot;&lt;BR&gt;&lt;H3&gt;Your password and username should be on its way&lt;/H3&gt;&quot;;
      }
      else{
         $str=&quot;&lt;B&gt;Couldn't find any info that matched what you gave us, make sure you typed in everything correctly!&lt;/B&gt;&lt;BR&gt;&lt;BR&gt;&quot;.$str;
      }
  }
  $str;
%]</field>
  <field name="dynamicauthor_permission" type="literal_value">-1</field>
  <field name="dynamicgroup_permission" type="literal_value">-1</field>
  <field name="dynamicguest_permission" type="literal_value">-1</field>
  <field name="dynamicother_permission" type="literal_value">-1</field>
  <field name="group_usergroup" type="literal_value">-1</field>
  <field name="groupaccess" type="literal_value">iiii-</field>
  <field name="guestaccess" type="literal_value">iiii-</field>
  <field name="loc_location" type="noderef" type_nodetype="location,nodetype">superdoc</field>
  <field name="otheraccess" type="literal_value">iiii-</field>
  <field name="title" type="literal_value">What is my password</field>
  <field name="type_nodetype" type="noderef" type_nodetype="nodetype,nodetype">superdoc</field>
</NODE>
