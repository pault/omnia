<NODE export_version="0.5" nodetype="superdoc" title="login">
  <field type="noderef" type_nodetype="user,nodetype" name="author_user">root</field>
  <field type="literal_value" name="authoraccess">iiii</field>
  <field type="literal_value" name="doctext">[%
my $str = "";




if ($query->param('op') eq 'login' &amp;&amp; $$USER{title} ne "Guest User") {
  $str.= "Hey.  Glad you're back.  Would you like to go to your " 
    .linkNode($USER, "home node")
    ." or to ".linkNode($HTMLVARS{default_node})."?&lt;br>";

  $str.="...or back to "
    .linkNode($query->param("lastnode_id"))
    ."?&lt;br>" if ($query->param("lastnode_id"));
  return $str;
} elsif ($query->param('op') eq 'login') { 
  $str .="Oops.  You must have the wrong login or password or something:\n&lt;P>\n";
} elsif ($$USER{title} ne "Guest User") {
  $str.="Hey, ".linkNode($USER)."...  this is where you log in:&lt;p>\n";
}else {
  $str .="Welcome to $HTMLVARS{site_name}.  Authenticate yrself:\n&lt;p>\n";
}

$str .= $query->start_form("POST", $ENV{script_name}) .
		"&lt;input type=\"hidden\" name=\"op\" value=\"login\">".	
 		$query->hidden("node_id", getId($NODE))."\n".
		$query->hidden("lastnode_id", $query->param("lastnode_id"))."\n".

		$query->textfield (-name => "user",
			-size => 20,
			-maxlength => 20) . "&lt;br>" .
		$query->password_field(-name => "passwd",
			-size => 10,
			-maxlength => 10) ."&lt;br>".
		$query->checkbox("expires", "", "+10y", "save me a permanent cookie, cowboy!"). 
		$query->submit("sexisgood", "stumbit") .
		$query->end_form;
	$str;
%]

	
</field>
  <field type="literal_value" name="dynamicauthor_permission">-1</field>
  <field type="literal_value" name="dynamicgroup_permission">-1</field>
  <field type="literal_value" name="dynamicguest_permission">-1</field>
  <field type="literal_value" name="dynamicother_permission">-1</field>
  <field type="literal_value" name="group_usergroup">-1</field>
  <field type="literal_value" name="groupaccess">iiii-</field>
  <field type="literal_value" name="guestaccess">iiii-</field>
  <field type="noderef" type_nodetype="location,nodetype" name="loc_location">superdoc</field>
  <field type="literal_value" name="otheraccess">iiii-</field>
  <field type="literal_value" name="title">login</field>
  <field type="noderef" type_nodetype="nodetype,nodetype" name="type_nodetype">superdoc</field>
</NODE>
