<NODE><INFO>rendered by Everything::XML.pm</INFO>
	<author_user table="node" type="usergroup">gods</author_user>
	<core table="node">R</core>
	<doctext table="document">[%
my $str = "";




if ($query-&gt;param('op') eq 'login' &amp;&amp; $$USER{title} ne "Guest User") {
  $str.= "Hey.  Glad you're back.  Would you like to go to your " 
    .linkNode($USER, "home node")
    ." or to ".linkNode($HTMLVARS{default_node})."?&lt;br&gt;";

  $str.="...or back to "
    .linkNode($query-&gt;param("lastnode_id"))
    ."?&lt;br&gt;" if ($query-&gt;param("lastnode_id"));
  return $str;
} elsif ($query-&gt;param('op') eq 'login') { 
  $str .="Oops.  You must have the wrong login or password or something:\n&lt;P&gt;\n";
} elsif ($$USER{title} ne "Guest User") {
  $str.="Hey, ".linkNode($USER)."...  this is where you log in:&lt;p&gt;\n";
}else {
  $str .="Welcome to Everything 2.  Authenticate yrself:\n&lt;p&gt;\n";
}

$str .= $query-&gt;start_form("POST", $ENV{script_name}) .
		"&lt;input type=\"hidden\" name=\"op\" value=\"login\"&gt;".	
 		$query-&gt;hidden("node_id", getId($NODE))."\n".
		$query-&gt;hidden("lastnode_id", $query-&gt;param("lastnode_id"))."\n".

		$query-&gt;textfield (-name =&gt; "user",
			-size =&gt; 20,
			-maxlength =&gt; 20) . "&lt;br&gt;" .
		$query-&gt;password_field(-name =&gt; "passwd",
			-size =&gt; 10,
			-maxlength =&gt; 10) ."&lt;br&gt;".
		$query-&gt;checkbox("expires", "", "+10y", "save me a permanent cookie, cowboy!"). 
		$query-&gt;submit("sexisgood", "stumbit") .
		$query-&gt;end_form;
	$str;
%]

	
</doctext>
	<package table="node">0</package>
	<reputation table="node">0</reputation>
	<title table="node">login</title>
	<type_nodetype table="node" type="nodetype">superdoc</type_nodetype>
</NODE>