<NODE export_version="0.5" nodetype="htmlpage" title="workspace display page">
  <field name="author_user" type="noderef" type_nodetype="user,nodetype">root</field>
  <field name="authoraccess" type="literal_value">iiii</field>
  <field name="displaytype" type="literal_value">display</field>
  <field name="dynamicauthor_permission" type="literal_value">-1</field>
  <field name="dynamicgroup_permission" type="literal_value">-1</field>
  <field name="dynamicguest_permission" type="literal_value">-1</field>
  <field name="dynamicother_permission" type="literal_value">-1</field>
  <field name="group_usergroup" type="literal_value">-1</field>
  <field name="groupaccess" type="literal_value">iiiii</field>
  <field name="guestaccess" type="literal_value">iiiii</field>
  <field name="loc_location" type="literal_value">0</field>
  <field name="otheraccess" type="literal_value">iiiii</field>
  <field name="ownedby_theme" type="literal_value">0</field>
  <field name="page" type="literal_value">[%

if ($$USER{inside_workspace} != $$NODE{node_id}) {
  return linkNode($NODE, "Join this workspace", { op => 'changeworkspace', workspace_me => 'true' });
}

linkNode($NODE, "Remove me from this workspace", { op => 'changeworkspace', workspace_me => 'false'});

%]
&lt;p>
Users in this workspace:
[%
  my (@U) = @{ getNodeWhere({inside_workspace => $$NODE{node_id}}, 'user') };
  return "&lt;p>&lt;i>none&lt;/i>" unless @U;
  my $str;
  foreach (@U) { $str.="&lt;li>".linkNode($_) }
  $str;
%]

&lt;p>

Nodes revised in this workspace:
[%
my $str;
my $V = $NODE->getVars;

my $isInWS =  $DB->{workspace}{node_id} == $$NODE{node_id};

$str.= openform() ."
&lt;INPUT TYPE=hidden NAME=op VALUE=commitworkspace>" if $isInWS;

return unless exists $DB->{workspace} and $DB->{workspace}{node_id} == $$NODE{node_id};
return "&lt;p>&lt;i>none&lt;/i>" unless keys %$V;

foreach (keys %$V) {
  $str.="&lt;li>";
  $str.=$query->checkbox("commit_$_", 0, 'yes', "") if $isInWS;
  $str.= linkNode($_);
}
$str.="&lt;br>".$query->submit("trash", "commit changes")."&lt;/FORM>" if $isInWS;
$str;
%]
</field>
  <field name="pagetype_nodetype" type="noderef" type_nodetype="nodetype,nodetype">workspace</field>
  <field name="parent_container" type="noderef" type_nodetype="container,nodetype">general container</field>
  <field name="permissionneeded" type="literal_value">x</field>
  <field name="title" type="literal_value">workspace display page</field>
  <field name="type_nodetype" type="noderef" type_nodetype="nodetype,nodetype">htmlpage</field>
</NODE>
