<NODE export_version="0.5" nodetype="htmlpage" title="node basicedit page">
  <field type="noderef" type_nodetype="user,nodetype" name="author_user">root</field>
  <field type="literal_value" name="authoraccess">iiii</field>
  <field type="literal_value" name="displaytype">basicedit</field>
  <field type="literal_value" name="dynamicauthor_permission">-1</field>
  <field type="literal_value" name="dynamicgroup_permission">-1</field>
  <field type="literal_value" name="dynamicguest_permission">-1</field>
  <field type="literal_value" name="dynamicother_permission">-1</field>
  <field type="literal_value" name="group_usergroup">-1</field>
  <field type="literal_value" name="groupaccess">iiii-</field>
  <field type="literal_value" name="guestaccess">iiii-</field>
  <field type="noderef" type_nodetype="location,nodetype" name="loc_location">htmlpage</field>
  <field type="literal_value" name="otheraccess">iiii-</field>
  <field type="literal_value" name="ownedby_theme">0</field>
  <field type="literal_value" name="page">[{openform}]

[%
# This edit page displays each field of a node with a
# (usually) appropriate form item in which to edit the
# contents of each field.  This is useful to edit a node's
# data that is usually not accessable through a standard
# edit page (like createtime, or hits)

return "" unless($NODE->hasAccess($USER, 'w'));

# This code does the update, if we have one.
my $param;
my @params = $query->param;

foreach $param (@params)
{
  if ($param =~ /^update_(\w*)$/)
  {
    $$NODE{$1} = $query->param($param);
  }
}

$NODE->update($USER);

return "";
%]

[%
# This code generates the form fields and the stuff that
# the user sees.
return "" unless($NODE->hasAccess($USER, 'w'));
my $tables = $$NODE{type}->getTableArray(1);
my @fields;
my $table;
my $field;
my %titletype;
my $str = "";

foreach $table (@$tables)
{
  @fields = $DB->getFieldsHash($table);

  foreach $field (@fields)
  {
    $titletype{$$field{Field}} = $$field{Type};
  }
}

foreach $field (keys %titletype)
{
  $str .= "$field ($titletype{$field}): ";

  if($titletype{$field} =~ /int/)
  {
    $str .= $query->textfield( -name => "update_$field",
      -default => $$NODE{$field}, -size => 15,
      -maxlength => 15) . "&lt;br>\n";
  }
  elsif($titletype{$field} =~ /char\((.*)\)/)
  {
    my $size = 80;

    $size = $1 if($size > $1);
    $str .= $query->textfield( -name => "update_$field",
      -default => $$NODE{$field}, -size => $size,
      -maxlength => $1 ) . "&lt;br>\n";
  }
  elsif($titletype{$field} =~ /text/)
  {
    $str .= $query->textarea( "update_$field",
      $$NODE{$field}, 20, 80) . "&lt;br>\n";
  }
  elsif($titletype{$field} =~ /datetime/)
  {
    $str .= $query->textfield( -name => "update_$field",
      -default => $$NODE{$field}, -size => 19,
      -maxlength => 19 ) . "&lt;br>\n";
  }
  else
  {
    # This is for the unknown field types.
    $str .= $query->textfield( -name => "update_$field",
      -default => $$NODE{$field}, -size => 80,
      -maxlength => 256) . "&lt;br>\n";
  }
}

$str;
%]

[{closeform}]</field>
  <field type="noderef" type_nodetype="nodetype,nodetype" name="pagetype_nodetype">node</field>
  <field type="noderef" type_nodetype="container,nodetype" name="parent_container">main container</field>
  <field type="literal_value" name="permissionneeded">w</field>
  <field type="literal_value" name="title">node basicedit page</field>
  <field type="noderef" type_nodetype="nodetype,nodetype" name="type_nodetype">htmlpage</field>
</NODE>
